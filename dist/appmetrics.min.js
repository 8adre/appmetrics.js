var Metric=function(a){if(!a)throw Error("Please provide a metric name");if(!Metric.supportsPerfMark&&(console.warn("Timeline won't be marked for \""+a+'".'),!Metric.supportsPerfNow))throw Error("This library cannot be used in this browser.");this.name=a};Metric.prototype.log=function(){console.info(this.name,this.duration,"ms");return this};
Metric.prototype.logAll=function(a){a=void 0===a?this.name:a;if(Metric.supportsPerfNow)for(var b=performance.getEntriesByName(a),c=0;c<b.length;++c)console.info(a,b[c].duration,"ms");return this};Metric.prototype.start=function(){if(this._start)return console.warn("Recording already started."),this;this._start=performance.now();Metric.supportsPerfMark&&performance.mark("mark_"+this.name+"_start");return this};
Metric.prototype.end=function(){if(this._end)return console.warn("Recording already stopped."),this;this._end=performance.now();if(Metric.supportsPerfMark){var a="mark_"+this.name+"_start",b="mark_"+this.name+"_end";performance.mark(b);performance.measure(this.name,a,b)}return this};Metric.prototype.sendToAnalytics=function(a,b,c){b=void 0===b?this.name:b;c=void 0===c?this.duration:c;window.ga?0<=c&&ga("send","timing",a,b,c):console.warn("Google Analytics has not been loaded");return this};
Object.defineProperties(Metric.prototype,{duration:{configurable:!0,enumerable:!0,get:function(){var a=this._end-this._start;if(Metric.supportsPerfMark){var b=performance.getEntriesByName(this.name)[0];b&&"measure"!==b.entryType&&(a=b.duration)}return a||-1}}});Object.defineProperties(Metric,{supportsPerfNow:{configurable:!0,enumerable:!0,get:function(){return performance&&performance.now}},supportsPerfMark:{configurable:!0,enumerable:!0,get:function(){return performance&&performance.mark}}});
